<% @product = Product.find(params[:product_id]) -%>
<% @coupon.product = @product %>
<h1>New Coupon</h1>

<h2><%= h @product.code %>: <%= h @product.description %></h2>

<% form_for [:admin,@product,@coupon] do |f| %>
  <%= f.error_messages %>
  <%= f.hidden_field :product_id %>
  <table class="fieldset">
    <tbody>
      <tr>
        <td class="label"><label for="coupon_code">Code</label></td>
        <td class="field"><%= f.text_field :code, :size => 100, :class => 'textbox'  %></td>
        <td class="help">Required. Only numbers and letters allowed</td>
      </tr>
      <tr>
        <td class="label"><label class="optional" for="coupon_expiration_date">Expiration Date</label></td>
        <td class="field"><%= f.text_field :expiration_date, :size => 100, :class => 'textbox' %></td>
        <td class="help">Optional, enter as yyyy-mm-dd (4 digit year, 2 digit month, 2 digit day)</td>
      </tr>
      <tr>
        <td class="label"><label for="coupon_discount_per_order">Discount per order</label></td>
        <td class="field"><%= f.text_field :discount_per_order, :size => 100, :class => 'textbox' %></td>
        <td class="help">Required. Discount per order (regardless of product count in order) in dollars and cents.</td>
      </tr>
    </tbody>
  </table>  
  <p class="buttons">
    <%= save_model_button(@coupon) %>
    <%= save_model_and_continue_editing_button(@coupon) %>
    or <%= link_to "Cancel", admin_products_url %>
  </p>
<% end %>

<%= focus 'coupon_code' %>
